!function(){var k="undefined"!=typeof clickmagick_cmc;k&&(clickmagick_cmc.version="2.21");if(bots=new RegExp(["google-adwords","google web preview","google-structured-data","appengine-google","feedfetcher-google","adsbot-google","googlebot","facebookexternalhit","bingbot","msnbot","bingpreview","pinterestbot","google-read-aloud","petalbot","ahrefsbot","adidxbot"].join("|"),"i"),!bots.test(navigator.userAgent)){for(var o="https://www.clkmc.com/api/",m=window.location.href.replace(/\?.*/,""),c=function(){for(var c=0,i=document.domain,e=i.split("."),m="_gd"+(new Date).getTime();c<e.length-1&&-1===document.cookie.indexOf(m+"="+m);)i=e.slice(-1-++c).join("."),document.cookie=m+"="+m+";domain="+i+";";return document.cookie=m+"=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain="+i+";",i=/^(co|com|edu|gov|ltd|net|org)\.[a-z]{2}$/i.test(i)?document.domain.split(".").slice(-3).join("."):i}(),t={},i=window.location.search.replace(/^\?/,"&"),_=0,e=i.split("&"),a=0;a<e.length;a++){var l=e[a].match(/=(\d{10}_cmc\d{10})/);if(l){_=l[1];break}}var n,r,g,s,d,u=w("cmc_vid")||w("cmc_id");u.match(/^cmc\d{10}$/i)&&(document.cookie="cmc_vid=; expires=Thu, 01 Jan 1970 00:00:01 GMT; path=/",p("cmc_vid",u,"."+c,365)),u=function(c){for(var i=c+"=",e=decodeURIComponent(document.cookie).split(";"),m=0;m<e.length;m++){for(var t=e[m];" "===t.charAt(0);)t=t.substring(1);if(0===t.indexOf(i))return t.substring(i.length,t.length)}return""}("cmc_vid"),k&&(((d=w(s="cmc_ignore"))?!/^(no|false|0)$/i.test(d):clickmagick_cmc[s])||(clickmagick_cmc.utm_source=b("utm_source"),clickmagick_cmc.utm_medium=b("utm_medium"),clickmagick_cmc.utm_campaign=b("utm_campaign"),clickmagick_cmc.utm_term=b("utm_term"),clickmagick_cmc.utm_content=b("utm_content"),clickmagick_cmc.cmc_project=b("cmc_project"),clickmagick_cmc.cmc_goal=b("cmc_goal"),clickmagick_cmc.cmc_amt=b("cmc_amt"),clickmagick_cmc.cmc_cpc=b("cmc_cpc"),clickmagick_cmc.cmc_ref=b("cmc_ref"),clickmagick_cmc.cmc_unique=b("cmc_unique"),clickmagick_cmc.gclid=b("gclid"),clickmagick_cmc.msclkid=b("msclkid"),clickmagick_cmc.fbclid=b("fbclid"),clickmagick_cmc.cmc_strip=b("cmc_strip"),clickmagick_cmc.cmc_tid=b("cmc_tid"),clickmagick_cmc.cmc_amt=clickmagick_cmc.cmc_amt.replace(/%2c/gi,","),clickmagick_cmc.cmc_cpc=clickmagick_cmc.cmc_cpc.replace(/%2c/gi,","),"internal"===(r=clickmagick_cmc.utm_source.toLowerCase())?clickmagick_cmc.utm_source=r:"organic"===r&&(clickmagick_cmc.utm_source="",u||(clickmagick_cmc.utm_source=r,clickmagick_cmc.utm_medium=r,clickmagick_cmc.utm_campaign="none",document.referrer&&((n=document.createElement("a")).href=document.referrer,clickmagick_cmc.utm_campaign=n.hostname),clickmagick_cmc.cmc_goal="")),"a"===(r=w("cbur").toLowerCase())&&(clickmagick_cmc.cmc_goal="s"),"d"===r&&(clickmagick_cmc.cmc_goal=""),n=/^[aes]$/i.test(clickmagick_cmc.cmc_goal),r=""!==clickmagick_cmc.utm_source&&""!==clickmagick_cmc.utm_medium&&""!==clickmagick_cmc.utm_campaign,clickmagick_cmc.uid&&clickmagick_cmc.hid&&(r||n)&&(r&&""===clickmagick_cmc.cmc_project&&(clickmagick_cmc.cmc_project=c.replace(/^www\./i,"")),/^(appspot\.com|googleusercontent\.com|localhost|\d+(\.\d+)+)$/i.test(clickmagick_cmc.cmc_project)||(u||p("cmc_vid",u="cmc"+(Math.round(3294967294*Math.random())+1e9),"."+c,365),g="?vid="+u.substr(3),Object.keys(clickmagick_cmc).forEach(function(c){/^(cmc_strip|vid|id|attrs)$/.test(c)||""===clickmagick_cmc[c]||(g+="&"+c+"="+encodeURIComponent(clickmagick_cmc[c]))}),h(),!r||n&&"internal"!==clickmagick_cmc.utm_source||f(o+g.replace(/&cmc_goal=[^&]+/,""),"click"),n&&f(o+g.replace(/&utm_[^&]+/gi,""),"goal"),v()))),clickmagick_cmc.log=function(c,i,e,m){if(c=c.toLowerCase(),i=void 0!==i?i:"",e=void 0!==e?e:"",m=void 0!==m?m:"",/^\d+$/.test(clickmagick_cmc.uid)&&/^\d+$/.test(clickmagick_cmc.hid)){goalURL=o+"?vid="+u.replace(/^cmc/i,"")+"&uid="+clickmagick_cmc.uid+"&hid="+clickmagick_cmc.hid+"&cmc_goal="+c+"&cmc_ref="+encodeURIComponent(i),h(),"a"===c||"e"===c?f(goalURL+"&cmc_project="+encodeURIComponent(e),"goal"):"s"===c&&f(goalURL+"&cmc_amt="+encodeURIComponent(e)+"&cmc_project="+encodeURIComponent(m),"goal"),v();for(var t=Date.now()+200;Date.now()<t;);}},/cmc|utm/i.test(clickmagick_cmc.cmc_strip)&&history.replaceState&&(i=(i=(i=/utm/i.test(clickmagick_cmc.cmc_strip)?(i=(i=(i=i.replace(/&utm_[^&]+/gi,"")).replace(/&gclid[^&]+/gi,"")).replace(/&msclkid[^&]+/gi,"")).replace(/&fbclid[^&]+/gi,""):i).replace(/&cmc_[^&]+/gi,"")).replace(/^&/,"?"))!==window.location.search&&history.pushState({},"",window.location.pathname+i+window.location.hash),clickmagick_cmc.id=u,clickmagick_cmc.vid=u),"complete"===document.readyState||"loading"!==document.readyState&&!document.documentElement.doScroll?R():document.addEventListener("DOMContentLoaded",R)}function p(c,i,e,m){var t=new Date;t.setTime(t.getTime()+Math.floor(24*m*60*60*1e3)),document.cookie=c+"="+i+";domain="+e+";expires="+t.toUTCString()+";path=/"}function f(c,i){var e;/^(click|goal)$/.test(i)||console.assert("type must be 'click' or 'goal'"),c+="&page_url="+encodeURIComponent(m),(e=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"))?(t[i]="waiting",e.onload=function(){var c=JSON.parse(e.response);"ABUSER"===c.status&&(window.location.href=c.url),t[i]="success"},e.onerror=function(){t[i]="error"},e.open("GET",c,!0),e.send()):document.createElement("img").src=c}function h(){clickmagick_cmc.status="waiting",t={click:"success",goal:"success"}}function v(){var i=0;!function c(){setTimeout(function(){("waiting"===t.click||"waiting"===t.goal)&&i++<70?c():clickmagick_cmc.status="success"===t.click&&"success"===t.goal?"success":"error"},100)}()}function w(c){c=new RegExp("&"+c+"=([^&]*)","i").exec(i);return c?decodeURIComponent(c[1]):""}function b(c){var i=w(c);return""!==i?i:void 0!==clickmagick_cmc[c]?clickmagick_cmc[c]:""}function R(){function c(c,i){for(var e=c.replace(/\s+/g,"").split(/\s*,\s*/),m=0;m<e.length;m++){var t=e[m],o="0.00",a=(t=!/^[.#]/.test(t)?"#"+t:t).match(/(.+):([\d.]+)/);a&&(t=a[1],o=a[2]);for(var l=document.querySelectorAll(t),t=t.substr(1),n="s"===i?clickmagick_cmc.log.bind(null,"s",t,o):clickmagick_cmc.log.bind(null,i,t),r=0;r<l.length;r++)l[r].addEventListener("click",n)}}k&&(clickmagick_cmc.hasOwnProperty("log_action")&&c(clickmagick_cmc.log_action,"a"),clickmagick_cmc.hasOwnProperty("log_engage")&&c(clickmagick_cmc.log_engage,"e"),clickmagick_cmc.hasOwnProperty("log_sale")&&c(clickmagick_cmc.log_sale,"s"));var i=["href","src","value","data-imagelink","data-custom-js"];k&&clickmagick_cmc.hasOwnProperty("attrs")&&(i=i.concat(clickmagick_cmc.attrs));for(var e=/(\[|\%5B)(cmc_vid|cmc_id|clickid|gclid|msclkid|fbclid|utm_.+?)(\]|\%5D)/i,m=0;m<i.length;m++)for(var t=i[m],o=document.querySelectorAll("["+t+"]"),a=0;a<o.length;a++){for(var l=o[a].getAttribute(t),n=0;g=l.match(e);){var r=_||u,g=g[2].toLowerCase();if(/^(utm_.*|gclid|msclkid|fbclid)$/.test(g)&&(r=clickmagick_cmc[g]),l=l.replace(e,r),10<n++)break}l!==o[a].getAttribute(t)&&o[a].setAttribute(t,l)}}}();
